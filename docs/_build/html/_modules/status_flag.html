<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>status_flag &mdash; CORMAT_py 0.0.13 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CORMAT_py 0.0.13 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for status_flag</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"> Simple program to access status flags</span>
<span class="sd"> contains a main that creates a database for a given pulse list</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># ----------------------------</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;B. Viola&quot;</span>
<span class="c1"># ----------------------------</span>
<span class="kn">from</span> <span class="nn">ppf</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">getdat</span> <span class="kn">import</span> <span class="n">getdat</span><span class="p">,</span> <span class="n">getsca</span>
<span class="c1"># from make_plots import make_plots</span>

<span class="c1">#import pylab as P</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">array</span><span class="p">,</span> <span class="n">zeros</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="c1">#print(path)</span>
<span class="c1"># sys.path.append(&quot;/jet/share/lib/python&quot;)</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_log_level_string_to_int</span><span class="p">(</span><span class="n">log_level_string</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">log_level_string</span> <span class="ow">in</span> <span class="n">_LOG_LEVEL_STRINGS</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;invalid choice: {0} (choose from {1})&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">log_level_string</span><span class="p">,</span> <span class="n">_LOG_LEVEL_STRINGS</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentTypeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="n">log_level_int</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">logging</span><span class="p">,</span> <span class="n">log_level_string</span><span class="p">,</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
    <span class="c1"># check the logging log_level_choices have not changed from our expected values</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">log_level_int</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">log_level_int</span>


<div class="viewcode-block" id="find_disruption"><a class="viewcode-back" href="../status_flag.html#status_flag.find_disruption">[docs]</a><span class="k">def</span> <span class="nf">find_disruption</span><span class="p">(</span><span class="n">pulse</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    given a pulse return if it has disrupted (True) or not (False) \</span>
<span class="sd">    returns n/a if there is no information about disruptions</span>
<span class="sd">    :param pulse:</span>
<span class="sd">    :return: boolean</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#print(pulse)</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">nwds</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">ier</span> <span class="o">=</span> <span class="n">getsca</span><span class="p">(</span><span class="s1">&#39;PF/PTN-DSRPT&lt;PFP&#39;</span><span class="p">,</span> <span class="n">pulse</span><span class="p">,</span> <span class="n">nwds</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1">#print(shape(data))</span>
    <span class="c1">#print(dtype(data))</span>
    <span class="c1">#print(pulse,data,ier)</span>
    <span class="c1">###print(len(data))</span>
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">ier</span><span class="p">)</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.0</span><span class="p">:</span>
          <span class="k">return</span> <span class="s1">&#39;True&#39;</span>
      <span class="k">else</span><span class="p">:</span>
          <span class="k">return</span> <span class="s1">&#39;False&#39;</span>
    <span class="k">else</span><span class="p">:</span>
      <span class="k">return</span> <span class="s1">&#39;n/a&#39;</span></div>

<div class="viewcode-block" id="initread"><a class="viewcode-back" href="../status_flag.html#status_flag.initread">[docs]</a><span class="k">def</span> <span class="nf">initread</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    initialize ppf</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#ier=ppfgo(pulse,sequence)</span>
    <span class="c1">#ppfsetdevice(&quot;JET&quot;)</span>
    <span class="n">ppfuid</span><span class="p">(</span><span class="s1">&#39;jetppf&#39;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="c1"># ppfuid(&quot;bviola&quot;,&quot;r&quot;)</span>
    <span class="n">ppfssr</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span></div>


<div class="viewcode-block" id="GetSF"><a class="viewcode-back" href="../status_flag.html#status_flag.GetSF">[docs]</a><span class="k">def</span> <span class="nf">GetSF</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="n">dda</span><span class="p">,</span><span class="n">dtype</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    </span>
<span class="sd">    :param pulse:</span>
<span class="sd">    :param dda: string e.g. &#39;kg1v&#39;</span>
<span class="sd">    :param dtype: string e.g. &#39;lid3&#39;</span>
<span class="sd">    :return: SF := status flag</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># this sequence of instruction allows to extract status flag correctly for each pulse</span>
    <span class="n">ihdat</span><span class="p">,</span><span class="n">iwdat</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">ier</span><span class="o">=</span><span class="n">ppfget</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span><span class="n">dda</span><span class="p">,</span><span class="n">dtype</span><span class="p">)</span>
    <span class="n">pulse</span><span class="p">,</span><span class="n">seq</span><span class="p">,</span><span class="n">iwdat</span><span class="p">,</span><span class="n">comment</span><span class="p">,</span><span class="n">numdda</span><span class="p">,</span><span class="n">ddalist</span><span class="p">,</span><span class="n">ier</span><span class="o">=</span><span class="n">ppfinf</span><span class="p">(</span><span class="n">comlen</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">numdda</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="c1">#info,cnfo,ddal,istl,pcom,pdsn,ier=pdinfo(pulse,seq) #commented lines, with this i get an error.</span>
    <span class="n">istat</span><span class="p">,</span><span class="n">ier</span> <span class="o">=</span> <span class="n">ppfgsf</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span><span class="n">seq</span><span class="p">,</span><span class="n">dda</span><span class="p">,</span><span class="n">dtype</span><span class="p">,</span><span class="n">mxstat</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># print(&#39;GETSF ok&#39;)</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">istat</span><span class="p">)</span></div>

<div class="viewcode-block" id="Getnonvalidatedpulses"><a class="viewcode-back" href="../status_flag.html#status_flag.Getnonvalidatedpulses">[docs]</a><span class="k">def</span> <span class="nf">Getnonvalidatedpulses</span><span class="p">(</span><span class="n">pulselist</span><span class="p">,</span><span class="n">dtypelist</span><span class="p">,</span><span class="n">SF_validated</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">    :param pulselist: list of pulses</span>
<span class="sd">    :param dtypelist: string e.g. &#39;lid1&#39;,&#39;lid2&#39;,...</span>
<span class="sd">    :param SF_validated: integer rapresenting SF for validated shots</span>
<span class="sd">    :return: array of integer with pulse numbers,status flag list</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">pulses_ok</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">data_SF_list</span> <span class="o">=</span><span class="nb">list</span><span class="p">()</span>
    <span class="n">isdisruption</span><span class="o">=</span><span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">pulselist</span><span class="p">:</span>
        <span class="n">data_SF</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">pulse</span><span class="o">=</span><span class="n">j</span>
        <span class="n">pulseok</span><span class="o">=</span><span class="bp">True</span>
        <span class="c1"># print(pulse)</span>
        <span class="n">distrupted</span><span class="o">=</span><span class="n">find_disruption</span><span class="p">(</span><span class="n">pulse</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">dtypelist</span><span class="p">)):</span>

            <span class="n">ddatype</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">dtypelist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

            <span class="n">aa</span><span class="o">=</span><span class="n">GetSF</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="s1">&#39;kg1v&#39;</span><span class="p">,</span><span class="n">ddatype</span><span class="p">)</span>
            <span class="c1"># print(aa)</span>
            <span class="n">data_SF</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asscalar</span><span class="p">(</span><span class="n">aa</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;printing data_SF for pulse </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">pulse</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;status flag are </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">data_SF</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data_SF</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">SF_validated</span><span class="p">:</span>
                <span class="n">pulseok</span><span class="o">=</span><span class="bp">False</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="k">if</span> <span class="n">pulseok</span><span class="p">:</span>
            <span class="c1"># print(pulse)</span>
            <span class="n">pulses_ok</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pulse</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;pulse </span><span class="si">%d</span><span class="s1"> has disrupted </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">pulse</span><span class="p">,</span><span class="n">distrupted</span><span class="p">)</span>
            <span class="n">isdisruption</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">distrupted</span><span class="p">)</span>
            <span class="n">data_SF_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;pulse </span><span class="si">%d</span><span class="s1"> has NOT been validated&#39;</span><span class="p">,</span> <span class="n">pulse</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;data_Sf for non validated pulse are </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">data_SF</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;status flag is set to </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">pulseok</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
           <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;pulse </span><span class="si">%d</span><span class="s1"> has been validated&#39;</span><span class="p">,</span> <span class="n">pulse</span><span class="p">,)</span>
           <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;data_SF for validated pulse are </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">data_SF</span><span class="p">)</span>
           <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;status flag is set to </span><span class="si">%r</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">pulseok</span><span class="p">)</span>
        <span class="c1"># print(&#39;Getnonvalidatedpulses ok&#39;)</span>
    <span class="k">return</span> <span class="n">pulses_ok</span><span class="p">,</span><span class="n">data_SF_list</span><span class="p">,</span><span class="n">isdisruption</span></div>

<div class="viewcode-block" id="GETfringejumps"><a class="viewcode-back" href="../status_flag.html#status_flag.GETfringejumps">[docs]</a><span class="k">def</span> <span class="nf">GETfringejumps</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span><span class="n">FJC_dtypelist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    :param pulse: pulse number</span>
<span class="sd">    :param FJC_dtypelist: string e.g. &#39;FC1&#39;,&#39;FC2&#39;,...</span>
<span class="sd">    :return: array of integer, rapresenting fringe jumps corrections</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="n">FJ_correction</span><span class="o">=</span><span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">jj</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">FJC_dtypelist</span><span class="p">)):</span>
        <span class="n">FJcount</span><span class="o">=</span><span class="n">FJC_dtypelist</span><span class="p">[</span><span class="n">jj</span><span class="p">]</span>
        <span class="n">ihdat</span><span class="p">,</span><span class="n">iwdat</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="n">ier</span><span class="o">=</span><span class="n">ppfget</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span><span class="s1">&#39;KG1V&#39;</span><span class="p">,</span><span class="n">FJcount</span><span class="p">)</span>
        <span class="n">corrections</span><span class="o">=</span><span class="n">iwdat</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">FJ_correction</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">corrections</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">FJ_correction</span></div>

<span class="c1"># if __name__ == &#39;__main__&#39;:</span>

<div class="viewcode-block" id="main"><a class="viewcode-back" href="../status_flag.html#status_flag.main">[docs]</a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">pulse1</span><span class="p">,</span> <span class="n">pulse2</span><span class="p">,</span> <span class="n">FJthres</span><span class="p">,</span><span class="n">outputfilename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :param pulse1:intial pulse</span>
<span class="sd">    :param pulse2: final pulse</span>
<span class="sd">    :param FJthres: threshold to be used to check number of fringe jumps in pulse</span>
<span class="sd">    :param outputfilename: output database name</span>
<span class="sd">    :return: database containing all pulses inside the given interval whose median of fringe jumps \</span>
<span class="sd">exceed the given threshold and marks if there was a disruption or not</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span>
    <span class="n">initread</span><span class="p">()</span>
    <span class="n">maxpulse</span><span class="o">=</span><span class="n">pdmsht</span><span class="p">()</span>
   

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;checking pulse list&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pulse2</span><span class="o">&lt;</span><span class="n">maxpulse</span><span class="p">:</span>
        <span class="n">pulseSpec</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="n">pulse1</span><span class="p">,</span> <span class="n">pulse2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pulse2</span><span class="o">&gt;</span><span class="n">maxpulse</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;pulse2 is greater that max pulse&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;pulse2 is greater than max pulse&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pulse2</span><span class="o">&lt;</span><span class="n">pulse1</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;pulse2 is greater that pulse1&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s2">&quot;pulse2 is greater that pulse1&quot;</span><span class="p">)</span>



    <span class="n">filename</span><span class="o">=</span><span class="n">outputfilename</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">pulse1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">pulse2</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="n">ier</span><span class="o">=</span><span class="n">ppfgo</span><span class="p">()</span>
    <span class="n">ppfsetdevice</span><span class="p">(</span><span class="s2">&quot;JET&quot;</span><span class="p">)</span>
    <span class="n">ppfuid</span><span class="p">(</span><span class="s2">&quot;jetppf&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="c1"># ppfuid(&quot;bviola&quot;,&quot;r&quot;)</span>
    <span class="n">ppfssr</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

    <span class="n">dda</span><span class="o">=</span><span class="s1">&#39;KG1V&#39;</span>

    <span class="n">LID_dtype</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LID1&#39;</span><span class="p">,</span><span class="s1">&#39;LID2&#39;</span><span class="p">,</span><span class="s1">&#39;LID3&#39;</span><span class="p">,</span><span class="s1">&#39;LID4&#39;</span><span class="p">,</span><span class="s1">&#39;LID5&#39;</span><span class="p">,</span><span class="s1">&#39;LID6&#39;</span><span class="p">,</span><span class="s1">&#39;LID7&#39;</span><span class="p">,</span><span class="s1">&#39;LID8&#39;</span><span class="p">]</span>
    <span class="n">FJC_dtype</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FC1&#39;</span><span class="p">,</span><span class="s1">&#39;FC2&#39;</span><span class="p">,</span><span class="s1">&#39;FC3&#39;</span><span class="p">,</span><span class="s1">&#39;FC4&#39;</span><span class="p">,</span><span class="s1">&#39;FC5&#39;</span><span class="p">,</span><span class="s1">&#39;FC6&#39;</span><span class="p">,</span><span class="s1">&#39;FC7&#39;</span><span class="p">,</span><span class="s1">&#39;FC8&#39;</span><span class="p">]</span>
    <span class="n">SF_validated</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;getting non validated pulse list&#39;</span><span class="p">)</span>
    <span class="c1"># try:</span>
    <span class="n">pulses</span><span class="p">,</span><span class="n">data_SF</span><span class="p">,</span><span class="n">isdisruption</span><span class="o">=</span><span class="n">Getnonvalidatedpulses</span><span class="p">(</span><span class="n">pulseSpec</span><span class="p">,</span><span class="n">LID_dtype</span><span class="p">,</span><span class="n">SF_validated</span><span class="p">)</span>
    <span class="c1"># print(pulses,data_SF)</span>
    <span class="c1"># logger.debug(&quot;done&quot;)</span>
    <span class="c1"># except    :</span>

    <span class="c1"># sys.exit(&#39;failed to get non validated pulses&#39;)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;checking if not validated pulses have a lot of FJ&#39;</span><span class="p">)</span>
    <span class="n">goodpulses</span> <span class="o">=</span><span class="p">{}</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;JPN&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;disruption&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF1&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF2&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF3&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF4&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF5&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF6&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF7&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;SF8&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ1&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ2&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ3&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ4&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ5&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ6&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ7&#39;</span><span class="p">,[])</span>
    <span class="n">goodpulses</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;FJ8&#39;</span><span class="p">,[])</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;defining output matrix&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">h</span><span class="p">,</span><span class="n">shot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pulses</span><span class="p">):</span>

        <span class="n">fjcorrection</span><span class="o">=</span><span class="n">GETfringejumps</span><span class="p">(</span><span class="n">shot</span><span class="p">,</span><span class="n">FJC_dtype</span><span class="p">)</span>
        <span class="c1"># print(fjcorrection)</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">FJthres</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;found unvalidated pulse with FJs: </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">shot</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;found unvalidated pulse with FJs: </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">shot</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;it&#39;&#39;s SF are </span><span class="si">%s</span><span class="s1">: &#39;</span><span class="p">,</span><span class="n">data_SF</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;FJ correction applied are </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">))</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;median of FJ </span><span class="si">%f</span><span class="s1"> &#39;</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">))</span>


            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;JPN&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shot</span><span class="p">)</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;disruption&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">isdisruption</span><span class="p">[</span><span class="n">h</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF4&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF5&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF7&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;SF8&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data_SF</span><span class="p">[</span><span class="n">h</span><span class="p">][</span><span class="mi">7</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ4&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ5&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ6&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ7&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">goodpulses</span><span class="p">[</span><span class="s1">&#39;FJ8&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;unvalidated pulse </span><span class="si">%d</span><span class="s1"> does not have FJs&#39;</span><span class="p">,</span><span class="n">shot</span><span class="p">)</span>
            <span class="c1"># logger.info(&#39;unvalidated pulse  %d does not have FJs&#39;,shot)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;data_SF </span><span class="si">%s</span><span class="s1">: &#39;</span><span class="p">,</span><span class="n">data_SF</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;fjcorrection </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">fjcorrection</span><span class="p">))</span>
    <span class="n">goodpulses_sorted</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">goodpulses</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
    <span class="c1"># aaa=</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;writing to file&#39;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">filename</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># Just use &#39;w&#39; mode in 3.x</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">goodpulses_sorted</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">c</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>



    <span class="k">except</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="s1">&#39;error writing to file&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;pulse list written to file </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">filename</span><span class="o">+</span><span class="s1">&#39;.csv&#39;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="printdict"><a class="viewcode-back" href="../status_flag.html#status_flag.printdict">[docs]</a><span class="k">def</span> <span class="nf">printdict</span><span class="p">(</span><span class="n">goodpulses_sorted</span><span class="p">):</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span><span class="p">,</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">goodpulses_sorted</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
        <span class="c1"># Ensure we are running python 3</span>
    <span class="c1"># assert sys.version_info &gt;= (3,3), &quot;Python version too old. Please use &gt;= 3.3.X.&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
    <span class="n">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="se">\t</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">,</span>
               <span class="n">filename</span><span class="o">=</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/debug.log&#39;</span><span class="p">,</span>
               <span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">_LOG_LEVEL_STRINGS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CRITICAL&#39;</span><span class="p">,</span> <span class="s1">&#39;ERROR&#39;</span><span class="p">,</span> <span class="s1">&#39;WARNING&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span> <span class="s1">&#39;DEBUG&#39;</span><span class="p">]</span>
    <span class="c1"># Parse arguments from the command line</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p1&quot;</span><span class="p">,</span> <span class="s2">&quot;--pulse1&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;start pulse number to run.&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p2&quot;</span><span class="p">,</span> <span class="s2">&quot;--pulse2&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;last pulse to check.&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--FJthres&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;fringe jumps threshold.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-n&quot;</span><span class="p">,</span> <span class="s2">&quot;--outputfilename&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;output filename.&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
                        <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;log_level&#39;</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="n">_log_level_string_to_int</span><span class="p">,</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Set the logging output level. {0}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_LOG_LEVEL_STRINGS</span><span class="p">))</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>

    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">log_level</span><span class="p">)</span>


    <span class="c1"># Call the main code</span>
    <span class="n">main</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">pulse1</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">pulse2</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">FJthres</span><span class="p">,</span><span class="n">args</span><span class="o">.</span><span class="n">outputfilename</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Bruno Viola.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
    </div>

    

    
  </body>
</html>